(function(){const c=`${new URL(document.currentScript.src).origin}/api/send`,a=document.currentScript.getAttribute("website"),u="data-counted-event",f=500,d=1e3,l="counted-session-token";function w(){var n=window.crypto||window.msCrypto;if(!n||!n.getRandomValues)throw new Error("Crypto.getRandomValues() not supported.");var t=new Uint8Array(16);n.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;for(var e=[],o=0;o<t.length;o++)e.push(t[o].toString(16).padStart(2,"0"));var r=e.slice(0,4).join("")+"-"+e.slice(4,6).join("")+"-"+e.slice(6,8).join("")+"-"+e.slice(8,10).join("")+"-"+e.slice(10).join("");return r}function p(n){if(navigator.sendBeacon){const t=new FormData;for(const o in n)n.hasOwnProperty(o)&&t.append(o,n[o]);navigator.sendBeacon(c,t)||console.error("Failed to send statistics.")}else{const t=new XMLHttpRequest;t.open("POST",c,!1),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(n)}}function i(n="view",t=null){if(!a){console.error("Missing website attribute!");return}const e={type:n,url:window.location.href,referrer:document.referrer,title:document.title,screen:`${window.screen.width}x${window.screen.height}`,language:window.navigator.language,website:a,eventData:t},o=sessionStorage.getItem(l);if(o)e.token=o;else{const r=w();sessionStorage.setItem(l,r),e.token=r}console.log(e);try{p(e)}catch(r){throw console.error("Error sending statistics:",r),r}}function g(n,t){let e;return function(...o){clearTimeout(e),e=setTimeout(()=>n.apply(this,o),t)}}function h(n,t){let e=!1;return function(...o){e||(n.apply(this,o),e=!0,setTimeout(()=>e=!1,t))}}function b(n){const t=n.target,e=t.tagName==="A"?t:t.closest("a"),o=(e==null?void 0:e.getAttribute(u))||t.getAttribute(u);let r=!1;o&&(e&&(r=e.target==="_blank"||n.ctrlKey||n.shiftKey||n.metaKey||n.button&&n.button===1,n.preventDefault()),g(()=>{new Promise((s,y)=>{try{i("event",o),s()}catch(E){y(E)}}).catch(s=>{console.error("Error sending statistics:",s)}).finally(()=>{e&&r&&window.open(e.href,"_blank")})},f)())}function m(){let n=document.location.href;const t=document.querySelector("body");new MutationObserver(o=>{o.forEach(()=>{n!==document.location.href&&(n=document.location.href,setTimeout(()=>{i()},d))})}).observe(t,{childList:!0,subtree:!0})}function v(){window.addEventListener("DOMContentLoaded",()=>{m(),i()}),window.addEventListener("popstate",()=>i()),window.addEventListener("click",h(b,d)),window.addEventListener("visibilitychange",()=>i("activity"))}v()})();
